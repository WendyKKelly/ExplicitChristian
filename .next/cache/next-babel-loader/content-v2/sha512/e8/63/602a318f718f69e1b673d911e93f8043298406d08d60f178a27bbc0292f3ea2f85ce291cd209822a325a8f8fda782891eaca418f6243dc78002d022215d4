{"ast":null,"code":"import fetch from 'isomorphic-unfetch';\nimport mailchimp from '@mailchimp/mailchimp_marketing';\nmailchimp.setConfig({\n  apiKey: process.env.MAILCHIMP_API_KEY,\n  server: process.env.MAILCHIMP_API_SERVER // e.g. us1\n\n});\nexport default (async (req, res) => {\n  const {\n    email\n  } = req.body;\n\n  if (!email) {\n    return res.status(400).json({\n      error: 'Email is required'\n    });\n  }\n\n  try {\n    await mailchimp.lists.addListMember(process.env.MAILCHIMP_AUDIENCE_ID, {\n      email_address: email,\n      status: 'subscribed'\n    });\n    return res.status(201).json({\n      error: ''\n    });\n  } catch (error) {\n    return res.status(500).json({\n      error: error.message || error.toString()\n    });\n  }\n});","map":null,"metadata":{},"sourceType":"module"}